---
import Layout from '~/layouts/PageLayout.astro';
import teamData from '~/data/team.json';
import { getPermalink } from '~/utils/permalinks';

interface TeamMember {
  name: string;
  role: string;
  photo: string;
  email?: string;
  website?: string;
  researchInterests?: string[];
  order: number;
}

const metadata = {
  title: 'Team',
  description: 'Meet the Basdogan Lab team.',
};

const team = (teamData as TeamMember[]).sort((a, b) => a.order - b.order);
---

<Layout metadata={metadata}>
  <section class="mx-auto max-w-7xl px-6 py-16 lg:py-24">
    <h1 class="text-4xl font-bold tracking-tight text-gray-900">Team</h1>
    <p class="mt-4 max-w-3xl text-lg text-gray-700">People driving the lab's research and collaborations.</p>

    <div class="mt-10 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      {
        team.map((member) => (
          <article class="rounded-2xl border border-gray-200 bg-white p-6 shadow-sm">
            <img src={member.photo} alt={`${member.name} portrait`} class="h-40 w-40 rounded-full object-cover" loading="lazy" />
            <h2 class="mt-4 text-xl font-semibold text-gray-900">{member.name}</h2>
            <p class="text-sky-700 font-medium">{member.role}</p>
            {member.researchInterests?.length ? (
              <p class="mt-2 text-sm text-gray-700">Interests: {member.researchInterests.join(', ')}</p>
            ) : null}
            <div class="mt-3 flex flex-wrap gap-3 text-sm">
              {member.email ? <a class="text-sky-700 hover:underline" href={`mailto:${member.email}`}>Email</a> : null}
              {member.website ? <a class="text-sky-700 hover:underline" href={member.website}>Website</a> : null}
              {member.role === 'PI' ? <a class="text-sky-700 hover:underline" href={getPermalink('/team/pi')}>View Full Profile</a> : null}
            </div>
          </article>
        ))
      }
    </div>
  </section>
</Layout>
