---
import Layout from '~/layouts/PageLayout.astro';
import teamData from '~/data/team.json';
import { getPermalink } from '~/utils/permalinks';

interface TeamMember {
  name: string;
  role: string;
  photo: string;
  email?: string;
  website?: string;
  researchInterests?: string[];
  order: number;
}

const pi = (teamData as TeamMember[]).find((member) => member.role === 'PI');

const metadata = {
  title: pi ? `${pi.name}` : 'PI Profile',
  description: 'Detailed profile page for the principal investigator.',
};
---

<Layout metadata={metadata}>
  <section class="mx-auto max-w-5xl px-6 py-16 lg:py-24">
    <a href={getPermalink('/team')} class="inline-flex items-center text-sm font-medium text-sky-700 hover:underline">← Back to Team</a>

    {
      pi ? (
        <>
          <div class="mt-6 flex flex-col gap-6 md:flex-row md:items-start">
            <img src={pi.photo} alt={`${pi.name} portrait`} class="h-44 w-44 rounded-2xl object-cover" />
            <div>
              <h1 class="text-4xl font-bold tracking-tight text-gray-900">{pi.name}</h1>
              <p class="mt-2 text-lg font-medium text-sky-700">{pi.role}</p>
              <div class="mt-4 flex flex-wrap gap-4 text-sm">
                {pi.email ? <a class="text-sky-700 hover:underline" href={`mailto:${pi.email}`}>Email</a> : null}
                {pi.website ? <a class="text-sky-700 hover:underline" href={pi.website}>Website</a> : null}
              </div>
            </div>
          </div>

          <article class="mt-10 rounded-2xl border border-gray-200 bg-white p-6 shadow-sm">
            <h2 class="text-2xl font-semibold text-gray-900">Biography</h2>
            <p class="mt-3 text-gray-700">
              This page highlights the PI's background, current research agenda, and leadership in the lab. Replace this
              placeholder paragraph with a full professional biography, including appointments, major awards, and service.
            </p>
            <p class="mt-3 text-gray-700">
              Recommended content to include: educational background, prior institutions, major milestones, and broad
              impact areas for the group's research program.
            </p>
          </article>

          <article class="mt-6 rounded-2xl border border-gray-200 bg-white p-6 shadow-sm">
            <h2 class="text-2xl font-semibold text-gray-900">Research Program</h2>
            <p class="mt-3 text-gray-700">
              Use this section to describe strategic research directions, long-term vision, and opportunities for
              collaboration with students, faculty, and industry partners.
            </p>
            {pi.researchInterests?.length ? (
              <ul class="mt-4 space-y-2 text-gray-700">
                {pi.researchInterests.map((interest) => <li>• {interest}</li>)}
              </ul>
            ) : null}
          </article>

          <article class="mt-6 rounded-2xl border border-gray-200 bg-white p-6 shadow-sm">
            <h2 class="text-2xl font-semibold text-gray-900">Mentorship and Open Positions</h2>
            <p class="mt-3 text-gray-700">
              Add information about mentorship philosophy, expected preparation for applicants, and available opportunities
              (PhD, MS, undergraduate, postdoctoral, or visiting scholar positions).
            </p>
            <p class="mt-3 text-gray-700">
              For inquiries, direct candidates to the Contact page or PI email listed above.
            </p>
          </article>
        </>
      ) : (
        <div class="mt-6 rounded-2xl border border-gray-200 bg-white p-6 shadow-sm">
          <h1 class="text-2xl font-semibold text-gray-900">PI profile not configured</h1>
          <p class="mt-3 text-gray-700">No team member with role `PI` was found in `src/data/team.json`.</p>
        </div>
      )
    }
  </section>
</Layout>

